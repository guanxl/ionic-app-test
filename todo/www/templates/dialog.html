<ion-view view-title="" ng-controller="dialog">
    <ion-nav-buttons side="left">
        <h1 class="title">神医啊</h1>
    </ion-nav-buttons>
    <ion-content has-bouncing='true' class="has-header has-footer" data-ng-init="load()">
        <div class="message-wrapper" ng-repeat="message in messages">
            <!-- 聊天对象模板 -->
            <div style="position: relative; top: 0; left: 0;" ng-if="user.id !== message.id" >
                <div class="chat-bublle left" style="border: 2px solid; width: auto; display: inline-block; padding: 4px 10px; border-radius: 4px; margin-left: 15px; margin-top: 15px; position: relative; left: 0; top: 0px;">
                    <div class="message"></div>
                    <div class="message-detail" style="white-space: normal; max-width: 270px;">
                        <p class="bold" style="margin-bottom: 4px; word-wrap: break-word; word-break: break-all;">{{ message.text }}</p>
                    </div>
                    <div class="message-biao" style="position: absolute; bottom: 12px; left: -10px;">
                        <span style="display: block;width: 0;height: 0;border-width: 6px;border-style: solid;border-color: transparent #333 #333 transparent; position: absolute;top: 2px; left: -3px;">
                    </span>
                        <em style="display: block; width: 0; height: 0; border-width: 5px; border-style: solid; border-color: transparent #fff #fff transparent; position: absolute; top: 2px; left: 3px;"></em>
                    </div>
                </div>
            </div>
            <!-- 聊天对象模板 End -->
            
            <!-- 自发消息模板 -->
            <div style="position: relative; top: 0; left: 0; text-align: right;" ng-if="user.id == message.id">
                <div class="chat-bublle right" style="border: 2px solid green; background-color: green; width: auto; display: inline-block; padding: 4px 10px; border-radius: 4px; margin-right: 15px; margin-top: 15px; position: relative; right: 0; top: 0px;">
                    <div class="message"></div>
                    <div class="message-detail" style="max-width: 270px; width: auto; white-space: normal;">
                        <p class="bold" style="color: #fff;word-break: break-all; text-align: left; margin: 4px;">{{ message.text }}</p>
                    </div>
                    <div class="message-biao" style="position: absolute; bottom: 12px; right: -10px;">
                        <span style="display: block;width: 0;height: 0;border-width: 6px;border-style: solid;border-color: transparent transparent green green; position: absolute;top: 2px; right: -3px;">
                    </span>
                        <em style="display: block; width: 0; height: 0; border-width: 5px; border-style: solid; border-color: transparent transparent green green; position: absolute; top: 2px; right: 3px;"></em>
                    </div>
                </div>
            </div>
            <!-- 自发消息模板 End -->
        </div>
    </ion-content>
    <!-- <form name="sendMessageForm" ng-submit="sendMessage(sendMessageForm)" novalidate>
        <ion-footer-bar class="bar-stable item-input-inset message-footer" keyboard-attach>
            <label class="item-input-wrapper">
                <textarea ng-model="input.message" value="" placeholder="Send {{toUser.username}} a message..." required minlength="1" maxlength="1500" style="width: 100%;" msd-elastic></textarea>
                <div contenteditable="true" style="width: 100%; min-height: 20px; max-height: 300px; margin-left: auto; margin-right: auto; padding: 3px; outline: 0; border: 1px solid #aaa; font-size: 12px; word-wrap: break-word; overflow-x: hidden; overflow-y: auto;"></div>
            </label>
            <button class="button button-icon icon ion-android-send" type="submit" ng-disabled="!input.message || input.message === ''" style="position: relative; right: 0px; bottom: 0px;">
            </button>
        </ion-footer-bar>
    </form> -->
    <ion-footer-bar align-title="left" class="item-input-inset bar-balanced" style="height: auto; min-height: 44px; padding: 4px 4px 4px 10px;">
      <div id="text-input" contenteditable="true" style="width: 100%; line-height: 20px; color: #333; max-height: 100px; word-break: break-all; overflow-x: hidden; overflow-y: hidden;" ng-focus="load2()">
          
      </div>
      <button class="button button-icon icon ion-android-send" ng-click="formSubmit()"></button>
    </ion-footer-bar>


    <form id="dialogForm" style="display: none;" ng-submit="">
        <textarea name=""></textarea>
    </form>
</ion-view>
